{"Version": "2012-10-17", "Statement": [{"Action": ["iam:ListAccountAliases", "iam:ListUsers", "iam:ListVirtualMFADevices", "iam:GetAccountPasswordPolicy", "iam:GetAccountSummary"], "Resource": "*", "Effect": "Allow", "Sid": "AllowAllUsersToListAccounts"}, {"Action": ["iam:ChangePassword", "iam:CreateAccessKey", "iam:CreateLoginProfile", "iam:DeleteAccessKey", "iam:DeleteLoginProfile", "iam:GetLoginProfile", "iam:ListAccessKeys", "iam:UpdateAccessKey", "iam:UpdateLoginProfile", "iam:ListSigningCertificates", "iam:DeleteSigningCertificate", "iam:UpdateSigningCertificate", "iam:UploadSigningCertificate", "iam:ListSSHPublicKeys", "iam:GetSSHPublicKey", "iam:DeleteSSHPublicKey", "iam:UpdateSSHPublicKey", "iam:UploadSSHPublicKey", "iam:ListUserPolicies"], "Resource": "arn:aws:iam::079704269206:user/${aws:username}", "Effect": "Allow", "Sid": "AllowIndividualUserToSeeAndManageOnlyTheirOwnAccountInformation"}, {"Action": ["iam:ListMFADevices"], "Resource": ["arn:aws:iam::079704269206:mfa/${aws:username}", "arn:aws:iam::079704269206:user/${aws:username}"], "Effect": "Allow", "Sid": "AllowIndividualUserToListOnlyTheirOwnMFA"}, {"Action": ["iam:CreateVirtualMFADevice", "iam:DeleteVirtualMFADevice", "iam:EnableMFADevice", "iam:ResyncMFADevice"], "Resource": ["arn:aws:iam::079704269206:mfa/${aws:username}", "arn:aws:iam::079704269206:user/${aws:username}"], "Effect": "Allow", "Sid": "AllowIndividualUserToManageTheirOwnMFA"}, {"Condition": {"Bool": {"aws:MultiFactorAuthPresent": "true"}}, "Action": ["iam:DeactivateMFADevice"], "Resource": ["arn:aws:iam::079704269206:mfa/${aws:username}", "arn:aws:iam::079704269206:user/${aws:username}"], "Effect": "Allow", "Sid": "AllowIndividualUserToDeactivateOnlyTheirOwnMFAOnlyWhenUsingMFA"}, {"Condition": {"BoolIfExists": {"aws:MultiFactorAuthPresent": "false"}}, "Resource": "*", "Effect": "Deny", "NotAction": ["iam:CreateVirtualMFADevice", "iam:DeleteVirtualMFADevice", "iam:ListVirtualMFADevices", "iam:EnableMFADevice", "iam:ResyncMFADevice", "iam:ListAccountAliases", "iam:ListUsers", "iam:ListSSHPublicKeys", "iam:ListAccessKeys", "iam:ListServiceSpecificCredentials", "iam:ListMFADevices", "iam:GetAccountSummary"], "Sid": "BlockMostAccessUnlessSignedInWithMFA"}]}